{% extends "home/base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'style/admin.css' %}">

<div class="container">

    <h1>Admin Dashboard</h1>

    <section>
        <h2>üìä Check Player Score</h2>
        <form method="get" action="/view-score/">
            <label>Search by PF No:</label>
            <input type="text" name="pf_no" placeholder="Enter PF No">

            <button type="submit">Search</button>
        </form>

        <form method="get" action="/view-all-scores/">
            <button type="submit">üìÉ See All Player Scores</button>
        </form>
    </section>

    <section>
        <h2>üë§ Add Player</h2>
        <form id = "add-player-form" method="post" >
            {% csrf_token %}
            <label>CMS ID:</label>
            <input type="text" name="crewid" id="crewid" required>
            <label>Player Name:</label>
            <input type="text" name="crew_name" id="crew_name" required>
            <label>Father Name:</label>
            <input type="text" name="father" id="father" >
            <label>Mobile No.</label>
            <input type="text" name="mobule" id="mobile_no">
            <label>PF No:</label>
            <input type="text" name="emp_id" id="emp_id" >
            <button type="submit">Add Player</button>
        </form>
        <script>
document.getElementById("add-player-form").onsubmit = async function(e) {
    e.preventDefault();
    const formData = new FormData(this);

    let response = await fetch("/add_player/", {
        method: "POST",
        body: formData,
        headers: { "X-Requested-With": "XMLHttpRequest" }
    });

    if (response.ok) {
        alert("‚úÖ Player added successfully!");
        this.reset();
    } else {
        alert("‚ùå Failed to add player");
    }
};
</script>
    </section>

    <section>
        <h2>üë• Add Bulk Players</h2>
        <form id="add-bulk-player-form" method="post" >
            {% csrf_token %}
            <label>Upload Excel/CSV:</label>
            <input type="file" name="file" required>
            <button type="submit">Upload</button>
        </form>
        <script>
document.getElementById("add-bulk-player-form").onsubmit = async function(e) {
    e.preventDefault();
    const formData = new FormData(this);

    let response = await fetch("/add_bulk_player/", {
        method: "POST",
        body: formData,
        headers: { "X-Requested-With": "XMLHttpRequest" }
    });

    if (response.ok) {
        alert("‚úÖ Player added successfully!");
        this.reset();
    } else {
        alert("‚ùå Failed to add player");
    }
};
</script>
    </section>

    <section>
        <h2>‚ùì Add Bulk Questions</h2>
        <form id="bulk_ques_form" method="post" >
            {% csrf_token %}
            <label>Upload Excel/CSV:</label>
            <input type="file" name="file" required>
            <button type="submit">Upload</button>
        </form>
    </section>
<script>
document.getElementById("bulk_ques_form").onsubmit = async function(e) {
    e.preventDefault();
    const formData = new FormData(this);

    let response = await fetch("/add_bulk_questions/", {
        method: "POST",
        body: formData,
        headers: { "X-Requested-With": "XMLHttpRequest" }
    });

    if (response.ok) {
        alert("‚úÖ Player added successfully!");
        this.reset();
    } else {
        alert("‚ùå Failed to add player");
    }
};
</script>
</div>

{% endblock %}
